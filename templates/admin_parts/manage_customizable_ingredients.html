<!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ -->
<section class="mb-5 position-relative">
  <h4 class="text-danger">Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ</h4>

  <!-- Ù…ÙƒØ§Ù† Ø¸Ù‡ÙˆØ± Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙÙ„Ø§Ø´ ÙƒÙ€ Toast -->
  <div id="flash-message" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>

  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…ÙƒÙˆÙ† Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ -->
  <form method="POST" class="border p-3 rounded bg-light mb-4">
    <div class="row">
      <div class="col-md-8">
        <input type="text" name="add_customizable_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ" required class="form-control">
      </div>
      <div class="col-md-4">
        <button type="submit" name="action" value="add_customizable" class="btn btn-primary w-100">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙƒÙˆÙ†</button>
      </div>
    </div>
  </form>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ -->
  <table class="table table-bordered table-hover text-center">
    <thead class="table-danger">
      <tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>ØªØ¹Ø¯ÙŠÙ„</th><th>Ø­Ø°Ù</th></tr>
    </thead>
    <tbody>
      {% for ingr in customizables %}
      <tr>
        <!-- Ù†Ù…ÙˆØ°Ø¬ ØªØ¹Ø¯ÙŠÙ„ Ù…ÙƒÙˆÙ† -->
        <form method="POST" class="d-inline-block">
          <input type="hidden" name="edit_customizable_id" value="{{ ingr.id }}">
          <td><input name="edit_customizable_name" value="{{ ingr.name }}" class="form-control" required></td>
          <td><button name="action" value="edit_customizable" class="btn btn-success btn-sm">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button></td>
        </form>

        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø­Ø°Ù Ù…ÙƒÙˆÙ† -->
        <form method="POST" onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…ÙƒÙˆÙ†ØŸ');" class="d-inline-block">
          <input type="hidden" name="delete_customizable_id" value="{{ ingr.id }}">
          <td><button name="action" value="delete_customizable" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>
        </form>
      </tr>
      {% else %}
      <tr><td colspan="3">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒÙˆÙ†Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<!-- Ø³ÙƒØ±Ø¨Øª Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙÙ„Ø§Ø´ ÙƒÙ€ Toast -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      let flashContainer = document.getElementById('flash-message');
      {% for message in messages %}
        let toastEl = document.createElement('div');
        toastEl.className = 'toast align-items-center text-bg-success border-0 mb-2 shadow';
        toastEl.setAttribute('role', 'alert');
        toastEl.setAttribute('aria-live', 'assertive');
        toastEl.setAttribute('aria-atomic', 'true');
        toastEl.innerHTML = `
          <div class="d-flex">
            <div class="toast-body">
              {{ message|e('js') }}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        `;
        flashContainer.appendChild(toastEl);

        let toast = new bootstrap.Toast(toastEl, { delay: 3000 });
        toast.show();
      {% endfor %}
    {% endif %}
  {% endwith %}
});
</script>