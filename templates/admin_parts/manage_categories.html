<!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¦Ø§Øª -->
<section class="container mb-5">
  <h4 class="text-danger fw-bold mb-4">ğŸ“‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¦Ø§Øª</h4>

  <!-- Toast Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙÙ„Ø§Ø´ -->
  <div id="flash-message" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>


<form method="POST">

</form>



  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø© -->
  <form method="POST" class="bg-white border border-2 rounded-4 shadow-sm p-4 mb-4">
    <div class="row g-3 align-items-center">
      <div class="col-md-8">
        <input type="text" name="add_category_name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©" required
          class="form-control rounded-3 border border-1">
      </div>
      <div class="col-md-4">
        <button type="submit" name="action" value="add_category"
          class="btn w-100 rounded-3 fw-bold text-white background-color-AB131C">
          â• Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø©
        </button>
      </div>
    </div>
  </form>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø¹Ø±Ø¶ Ø§Ù„ÙØ¦Ø§Øª -->
  <div class="table-responsive shadow-sm rounded-4 overflow-hidden">
    <table class="table table-bordered text-center align-middle m-0">
      <thead class="background-color-AB131C text-white">
        <tr>
          <th>Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©</th>
          <th>ØªØ¹Ø¯ÙŠÙ„</th>
          <th>Ø­Ø°Ù</th>
        </tr>
      </thead>
      <tbody>
        {% for cat in categories %}
        <tr>
          <!-- ØªØ¹Ø¯ÙŠÙ„ ÙØ¦Ø© -->
          <form method="POST">
            <input type="hidden" name="edit_category_id" value="{{ cat.id }}">
            <td>
              <input name="edit_category_name" value="{{ cat.name }}"
                class="form-control text-center rounded-3 border border-1" required>
            </td>
            <td>
              <button name="action" value="edit_category"
                class="btn btn-sm w-100 rounded-3  no-hover">
                âœï¸ ØªØ¹Ø¯ÙŠÙ„
              </button>
            </td>
          </form>

          <!-- Ø­Ø°Ù ÙØ¦Ø© -->
          <form method="POST" onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ÙØ¦Ø©ØŸ');">
            <input type="hidden" name="delete_category_id" value="{{ cat.id }}">
            <td>
              <button name="action" value="delete_category"
                class="btn btn-sm w-100 rounded-3  no-hover">
                ğŸ—‘ï¸ Ø­Ø°Ù
              </button>
            </td>
          </form>
        </tr>
        {% else %}
        <tr>
          <td colspan="3" class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ¦Ø§Øª Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<!-- Ø³ÙƒØ±Ø¨Øª Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§Ø´ ÙƒÙ€ Toast -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      const flashContainer = document.getElementById('flash-message');
      {% for message in messages %}
        const toast = document.createElement('div');
        toast.className = 'toast align-items-center text-bg-success border-0 show mb-2 shadow rounded-3';
        toast.setAttribute('role', 'alert');
        toast.setAttribute('aria-live', 'assertive');
        toast.setAttribute('aria-atomic', 'true');
        toast.innerHTML = `
          <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        `;
        flashContainer.appendChild(toast);
        setTimeout(() => {
          toast.classList.remove('show');
          toast.remove();
        }, 3000);
      {% endfor %}
    {% endif %}
  {% endwith %}
});
</script>
